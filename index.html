<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CharBuy Global</title>
    <meta name="google-adsense-account" content="ca-pub-4637073064890854">
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-512.png">
    <link rel="apple-touch-icon" href="icon-512.png">
    
    <meta name="theme-color" content="#FF9800">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4637073064890854" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet" />
    <style>
        :root { --p: #FF9800; --b: #080808; --c: #141414; --t: #ffffff; --g: #2ecc71; --r: #ff4757; --y: #f1c40f; --gold: #ffd700; }
        * { box-sizing: border-box; outline: none; }
        body { font-family: 'Poppins', sans-serif; background: var(--b); color: var(--t); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .header-app { width: 100%; height: 160px; background: radial-gradient(circle at top right, #e65100, #000000 85%); display: flex; flex-direction: column; align-items: center; justify-content: center; border-bottom: 3px solid var(--p); }
        .brand-name { font-size: 1.8rem; font-weight: 900; text-transform: uppercase; letter-spacing: 2px; }
        .brand-name span { color: var(--p); }
        main { width: 92%; max-width: 480px; margin: 20px auto; display: flex; flex-direction: column; gap: 15px; }
        .card { background: var(--c); padding: 25px; border-radius: 24px; border: 1px solid #252525; text-align: center; }
        .label { font-size: 0.75rem; color: var(--p); font-weight: 800; text-align: left; text-transform: uppercase; margin: 12px 0 6px 6px; display: block; }
        input, select { background: #000; border: 1px solid #333; color: white; padding: 16px; border-radius: 14px; width: 100%; font-size: 1.1rem; text-align: center; font-weight: 700; }
        .res-box { font-size: 3.5rem; font-weight: 900; color: var(--p); margin: 15px 0 0 0; letter-spacing: -2px; line-height: 1; }
        .decimal-note { font-size: 0.65rem; color: #444; margin-bottom: 15px; font-weight: 700; text-transform: uppercase; }
        .monitor-tag { background: #000; padding: 18px; border-radius: 15px; border: 1px solid #222; border-left: 6px solid var(--p); display: flex; flex-direction: column; gap: 5px; margin: 20px 0; }
        .monitor-main { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .monitor-price { font-weight: 900; color: var(--p); font-size: 1.3rem; }
        .old-price { font-size: 0.7rem; color: #555; text-align: right; width: 100%; font-weight: 700; text-transform: uppercase; display: flex; justify-content: flex-end; gap: 5px; }
        .old-price span { color: #888; text-decoration: line-through; opacity: 0.7; }
        .led-status { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px; padding: 10px; background: rgba(255,152,0,0.05); border-radius: 50px; }
        .led { width: 10px; height: 10px; border-radius: 50%; background: #333; transition: 0.3s; }
        .led-up { background: var(--g); box-shadow: 0 0 10px var(--g); }
        .led-down { background: var(--r); box-shadow: 0 0 10px var(--r); }
        #st { font-size: 0.65rem; font-weight: 900; color: var(--p); text-transform: uppercase; }
        .privacy-box { margin: 25px 0; padding: 20px; border-top: 2px solid #1a1a1a; text-align: justify; background: #0a0a0a; border-radius: 15px; }
        .privacy-box h3 { color: var(--p); font-size: 0.85rem; margin-top: 0; }
        .privacy-box p { font-size: 0.65rem; line-height: 1.6; color: #555; }

        /* MODULO RECOMPENSAS */
        .reward-card { background: linear-gradient(145deg, #1a1a1a, #000); border: 2px solid var(--p); padding: 20px; border-radius: 24px; text-align: center; }
        .points-display { font-size: 2.5rem; font-weight: 900; color: var(--p); margin: 5px 0; }
        .btn-reward { background: var(--y); color: #000; border: none; padding: 18px; width: 100%; border-radius: 15px; font-weight: 900; text-transform: uppercase; cursor: pointer; margin-bottom: 10px; transition: 0.2s; }
        .btn-reward:active { transform: scale(0.98); }
        
        @keyframes flash-points { 0% { color: #fff; text-shadow: 0 0 10px #fff; } 50% { color: var(--p); text-shadow: 0 0 20px var(--p); } 100% { color: #fff; text-shadow: 0 0 10px #fff; } }
        .flashing { animation: flash-points 0.2s 5; }

        #ins-btn { display: none; position: fixed; bottom: 20px; width: 90%; max-width: 400px; background: var(--p); color: #000; padding: 18px; border-radius: 20px; z-index: 9999; font-weight: 900; text-transform: uppercase; border: none; box-shadow: 0 10px 40px rgba(255,152,0,0.4); cursor: pointer; }

        /* BANNERS CON BORDE DORADO DOBLE */
        .monetag-stack { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 12px; margin: 20px 0; }
        .m-banner { 
            width: 100%; 
            min-height: 50px; 
            display: flex; 
            justify-content: center; 
            border: 4px double var(--gold); 
            border-radius: 8px; 
            padding: 2px;
        }
    </style>
</head>
<body>

<button id="ins-btn">Instalar App CharBuy</button>

<header class="header-app">
    <div style="font-size: 40px; margin-bottom: 5px;">$</div>
    <div class="brand-name">CHARBUY <span>GLOBAL</span></div>
</header>
<main>
    <section class="reward-card">
        <span class="label" style="text-align: center;">Progreso acumulado ($100)</span>
        <div class="points-display" id="pts-val">0</div>
        <div style="font-size: 0.6rem; color: #888; margin-bottom: 15px;">META: 10.000 PTS (1000 ANUNCIOS)</div>
        <button id="btn-v" class="btn-reward" onclick="viewAd()">Noticias Económicas al Día</button>
    </section>

    <section class="card">
        <span class="label">Monto</span>
        <input type="number" id="_v" value="1" inputmode="decimal" oninput="_clc()">
        <span class="label">Desde</span>
        <select id="_s1" onchange="_clc()">
            <option value="USD" selected>USD</option>
            <option value="VES">VES</option>
            <option value="USDT">USDT</option>
            <option value="EUR">EUR</option>
        </select>
        <span class="label">Hacia</span>
        <select id="_s2" onchange="_clc()">
            <option value="VES" selected>VES</option>
            <option value="USD">USD</option>
            <option value="USDT">USDT</option>
            <option value="EUR">EUR</option>
        </select>
        <div class="res-box" id="_r">---</div>
        <div class="decimal-note">Sincronización exacta CharBuy</div>
        <div class="monitor-tag">
            <div class="monitor-main">
                <div style="text-align: left;">
                    <span style="font-size: 0.65rem; color: #555; font-weight: 800;">REF. DÓLAR AL DÍA</span><br>
                    <span style="font-size: 0.85rem; font-weight: 900; color: #fff;">MONITOR VZLA</span>
                </div>
                <div class="monitor-price" id="_mon">CARGANDO...</div>
            </div>
            <div class="old-price" id="_old">Anterior: <span id="_ov">---</span></div>
        </div>
        <div class="led-status"><div id="led" class="led"></div><div id="st">CONECTANDO...</div></div>
    </section>

    <div style="width:100%; min-height:100px; margin: 10px 0;">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4637073064890854" data-ad-slot="8452109231" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <div class="monetag-stack">
        <div class="m-banner"><script async="async" data-cfasync="false" src="//otieu.com/4/10534539"></script></div>
        <div class="m-banner"><script async="async" data-cfasync="false" src="//otieu.com/4/10534539"></script></div>
        <div class="m-banner"><script async="async" data-cfasync="false" src="//otieu.com/4/10534539"></script></div>
        <div class="m-banner"><script async="async" data-cfasync="false" src="//otieu.com/4/10534539"></script></div>
        <div class="m-banner"><script async="async" data-cfasync="false" src="//otieu.com/4/10534539"></script></div>
    </div>

    <section class="privacy-box">
        <h3>Política de Privacidad</h3>
        <p><b>CharBuy Global</b> sincroniza tasas en tiempo real con fuentes globales y de mercado. Este sitio utiliza cookies de Google AdSense para ofrecer publicidad personalizada a sus usuarios.</p>
    </section>
</main>

<script>
    let totalPoints = parseInt(localStorage.getItem('user_pts')) || 0;
    const blogURL = "https://noticias2603.blogspot.com"; 
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playNote(freq, dur) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(); osc.stop(audioCtx.currentTime + dur);
    }

    function updatePoints(p) {
        totalPoints += p;
        localStorage.setItem('user_pts', totalPoints);
        const display = document.getElementById('pts-val');
        display.innerText = totalPoints;
        display.classList.add('flashing');
        setTimeout(() => display.classList.remove('flashing'), 1000);
    }

    function viewAd() {
        playNote(600, 0.1);
        const b = document.getElementById('btn-v');
        b.innerText = "VALIDANDO EN BLOG...";
        b.disabled = true;
        window.open(blogURL, '_blank'); 
        setTimeout(() => {
            updatePoints(10);
            b.innerText = "Noticias Económicas al Día";
            b.disabled = false;
        }, 5000); 
    }

    document.getElementById('pts-val').innerText = totalPoints;

    let _rates = { "USD": 1, "VES": 0, "USDT": 1, "EUR": 0.9 };
    let lastP = 0;

    function f(n) { 
        if (!n || isNaN(n) || n === 0) return "0,0"; 
        let str = Math.round(n * 10).toString(); 
        if (str.length < 2) str = str.padStart(2, '0'); 
        let d = str.slice(-1); 
        let i = str.slice(0, -1).replace(/\B(?=(\d{3})+(?!\d))/g, "."); 
        return i + "," + d; 
    }

    function _clc() { 
        const v = parseFloat(document.getElementById('_v').value) || 0; 
        const s1 = document.getElementById('_s1').value; 
        const s2 = document.getElementById('_s2').value; 
        if (_rates["VES"] === 0 && (s1 === "VES" || s2 === "VES")) { 
            document.getElementById('_r').innerText = "---"; 
            return; 
        } 
        const res = (v / _rates[s1]) * _rates[s2]; 
        document.getElementById('_r').innerText = f(res); 
    }
    
    async function syncUSDT() {
        try {
            const res = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=USDTUSDC');
            const data = await res.json();
            const p = parseFloat(data.price);
            if(p) {
                _rates["USDT"] = 1/p;
                _clc();
            }
        } catch(e) { console.log("Error USDT API"); }
    }

    async function sync() {
        document.getElementById('st').innerText = "SINCRONIZANDO...";
        await syncUSDT();
        try {
            const res = await fetch('https://open.er-api.com/v6/latest/USD');
            const data = await res.json();
            const resV = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
            const dataV = await resV.json();
            const pV = dataV.rates.VES; 
            if(pV) {
                const old = localStorage.getItem('c_last');
                if (old && parseFloat(old) !== pV) {
                    document.getElementById('_ov').innerText = f(parseFloat(old)) + " Bs";
                }
                localStorage.setItem('c_last', pV);
                _rates = { ...data.rates, "VES": pV, "USDT": _rates["USDT"] };
                document.getElementById('_mon').innerText = f(pV) + " Bs";
                document.getElementById('st').innerText = "SISTEMA ONLINE";
                _clc();
            }
        } catch (e) {
            document.getElementById('st').innerText = "ERROR DE CONEXIÓN";
            const backup = localStorage.getItem('c_last');
            if(backup) { 
                _rates["VES"] = parseFloat(backup); 
                document.getElementById('_mon').innerText = f(_rates["VES"]) + " Bs (Cache)"; 
                _clc(); 
            }
        }
    }

    function ws() {
        const socket = new WebSocket('wss://stream.binance.com:9443/ws/usdtusdc@ticker');
        socket.onmessage = (e) => {
            const p = parseFloat(JSON.parse(e.data).c);
            if (p) {
                const l = document.getElementById('led');
                if (lastP > 0) { 
                    l.className = 'led ' + (p > lastP ? 'led-up' : 'led-down'); 
                    setTimeout(() => l.className = 'led', 600); 
                }
                lastP = p; 
                _rates["USDT"] = 1/p; 
                _clc();
            }
        };
    }

    let defP; 
    const iBtn = document.getElementById('ins-btn');
    window.addEventListener('beforeinstallprompt', (e) => { 
        e.preventDefault(); 
        defP = e; 
        iBtn.style.display = 'block'; 
    });
    iBtn.addEventListener('click', async () => { 
        if (defP) { 
            defP.prompt(); 
            const { outcome } = await defP.userChoice; 
            if (outcome === 'accepted') iBtn.style.display = 'none'; 
            defP = null; 
        } 
    });
    
    window.onload = () => { 
        sync(); 
        ws(); 
        setInterval(sync, 60000); 
    };
</script>
</body>
</html>









